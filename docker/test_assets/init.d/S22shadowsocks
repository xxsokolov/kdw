#!/bin/sh
# Mock init script for testing

# Для теста на статус, чтобы ServiceManager мог определить состояние
if [ "$1" = "status" ]; then
    # Проверяем, запущен ли "процесс" (просто по наличию pid-файла)
    if [ -f /var/run/ss-redir.pid ]; then
        echo "ss-redir is running."
        exit 0
    else
        echo "ss-redir is stopped."
        exit 0 # Важно, чтобы команда status всегда завершалась успешно
    fi
fi

# Для теста на перезапуск
if [ "$1" = "restart" ]; then
    touch /var/run/ss-redir.pid
    echo "Mock S22shadowsocks restarted."
    exit 0
fi

# Для всех остальных команд
echo "Mock S22shadowsocks script called with: $1"
exit 0
